= Local Cluster

Sets up a cluster for local development


== Startup

[source,bash]
----
docker-machine create master1 && eval "$(docker-machine env master1)"
docker-machine create master2 && eval "$(docker-machine env master2)"
docker-machine create agent1 && eval "$(docker-machine env agent1)"
docker-machine create agent2 && eval "$(docker-machine env agent2)"
----

== macOS local DNS
For all the magic, we need to tweak DNS settings a bit.

* create a file `/etc/resolver/docker.localhost`
* add one line `nameserver 127.0.0.1`
* `brew install dnsmasq` (add one line to config: `address=/.docker.localhost/127.0.0.1`
* `sudo brew services start dnsmasq`
* `ping asdf.docker.localhost`

see https://getgrav.org/blog/macos-sierra-apache-mysql-vhost-apc
